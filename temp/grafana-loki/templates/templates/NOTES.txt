ğŸ‰ Grafana + Loki Pod has been deployed!

RELEASE: {{ .Release.Name }}
NAMESPACE: {{ include "grafana-loki.namespace" . }}
VERSION: Grafana {{ .Values.grafana.image.tag }} + Loki {{ .Values.loki.image.tag }}

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“‹ DEPLOYMENT INFO

{{- if .Values.grafana.enabled }}
  âœ… Grafana: ENABLED
  - Resource Preset: {{ .Values.grafana.resources.preset }}
  - Storage: {{ if .Values.grafana.persistence.enabled }}{{ .Values.grafana.persistence.size }}{{ else }}EmptyDir{{ end }}
{{- else }}
  âš ï¸  Grafana: DISABLED
{{- end }}

{{- if .Values.loki.enabled }}
  âœ… Loki: ENABLED
  - Resource Preset: {{ .Values.loki.resources.preset }}
  - Storage: {{ if .Values.loki.persistence.enabled }}{{ .Values.loki.persistence.size }}{{ else }}EmptyDir{{ end }}
  - Retention: {{ .Values.loki.config.limits.retentionPeriod }}
{{- else }}
  âš ï¸  Loki: DISABLED
{{- end }}

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸŒ ACCESSING GRAFANA

{{- if eq .Values.service.grafana.type "LoadBalancer" }}

1ï¸âƒ£ Get LoadBalancer IP:

   kubectl get svc {{ include "grafana-loki.fullname" . }}-grafana -n {{ include "grafana-loki.namespace" . }}

2ï¸âƒ£ Access Grafana:

   http://<EXTERNAL-IP>:{{ .Values.service.grafana.port }}

{{- else if eq .Values.service.grafana.type "NodePort" }}

1ï¸âƒ£ Get Node IP and port:

   export NODE_IP=$(kubectl get nodes -o jsonpath='{.items[0].status.addresses[?(@.type=="ExternalIP")].address}')
   export NODE_PORT=$(kubectl get svc {{ include "grafana-loki.fullname" . }}-grafana -n {{ include "grafana-loki.namespace" . }} -o jsonpath='{.spec.ports[0].nodePort}')

2ï¸âƒ£ Access Grafana:

   http://$NODE_IP:$NODE_PORT

{{- else }}

1ï¸âƒ£ Port-forward for local access:

   kubectl port-forward -n {{ include "grafana-loki.namespace" . }} svc/{{ include "grafana-loki.fullname" . }}-grafana {{ .Values.service.grafana.port }}:{{ .Values.service.grafana.port }}

2ï¸âƒ£ Access Grafana:

   http://localhost:{{ .Values.service.grafana.port }}

{{- end }}

{{- if .Values.ingress.enabled }}

ğŸŒ Ingress:
   {{- range .Values.ingress.hosts }}
   http{{ if $.Values.ingress.tls }}s{{ end }}://{{ .host }}
   {{- end }}

{{- end }}

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ”‘ GRAFANA LOGIN

Username: {{ .Values.grafana.admin.user }}
Password: Get from secret:

   kubectl get secret {{ include "grafana-loki.grafana.secretName" . }} -n {{ include "grafana-loki.namespace" . }} -o jsonpath='{.data.{{ .Values.grafana.admin.passwordKey }}}' | base64 --decode

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ”§ COMMON OPERATIONS

Monitor Pod Status:
  kubectl get pods -n {{ include "grafana-loki.namespace" . }} -l app.kubernetes.io/instance={{ .Release.Name }}

View Grafana Logs:
  kubectl logs -n {{ include "grafana-loki.namespace" . }} -l app.kubernetes.io/instance={{ .Release.Name }} -c grafana -f

View Loki Logs:
  kubectl logs -n {{ include "grafana-loki.namespace" . }} -l app.kubernetes.io/instance={{ .Release.Name }} -c loki -f

Check Loki Status:
  curl http://localhost:3100/ready (via port-forward)

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“š NEXT STEPS

1. Log into Grafana with the credentials above
2. Navigate to Explore to start querying Loki logs
3. Loki datasource is pre-configured and ready to use
4. Configure log shippers (Promtail, Fluent Bit, etc.) to send logs to:
   http://{{ include "grafana-loki.fullname" . }}-loki.{{ include "grafana-loki.namespace" . }}.svc.cluster.local:3100

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“– Documentation: https://github.com/fireball-industries/fireball-podstore-charts
ğŸ› Issues: https://github.com/fireball-industries/fireball-podstore-charts/issues

Built with ğŸ”¥ by Fireball Industries - Patrick Ryan
Because observability shouldn't require a PhD in YAML
